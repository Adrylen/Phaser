function listener(){planet_selected=this.i,planet_text.text=planet_list[this.i].name}var Planets=function(e){},theta=1,planet=[],demi_axes=[],sens=[],nb_of_planet=0,planet_selected=-1,planet_list=[],planet_text;Planets.prototype.init=function(){},Planets.prototype.preload=function(){game.load.image("galaxy","../images/backgrounds/galaxy.jpg");var e="../images/planets/";game.load.image("sun","../images/planets/sun.png");var t;for(var a in solar_system.users){solar_system.users[a].username==username&&(kaga=solar_system.users[a].ressources.kaga);for(var s in solar_system.users[a].planets)demi_axes.push(solar_system.users[a].planets[s].coeff),t="planet"+solar_system.users[a].planets[s].img,console.log(demi_axes),game.load.image(t,e+t+".png"),solar_system.users[a].planets[s].direction===!0?sens.push(1):sens.push(-1),planet_list.push(solar_system.users[a].planets[s]),nb_of_planet++}game.load.image("topBar","../images/bars/top_bar.jpg"),game.load.image("coin","../images/assets/coin.png"),game.load.image("selection","../images/assets/planetSelected.png")},Planets.prototype.create=function(){var e=game.add.image(0,30,"galaxy");e.width=1087,e.height=620,sun=game.add.image(game.width/2-35,(game.height-30)/2-15,"sun"),sun.width=90,sun.height=90;for(var t=0;nb_of_planet>t;t++){var a="planet".concat((t+1).toString());planet[t]=game.add.sprite(0,0,a),planet[t].width=38,planet[t].height=38;for(var s=0;nb_of_planet>s;s++)if(planet_list[s].img==t+1){var n=planet_list[s];planet_list[s]=planet_list[t],planet_list[t]=n}}for(topBar=game.add.image(0,0,"topBar"),topBar.height=30,coin=game.add.image(3,2,"coin"),coin.width=26,coin.height=26,text=game.add.text(32,0,kaga,{font:"bold 26px Century Schoolbook L",fill:"#f19010"}),text.height=33,t=0;nb_of_planet>t;t++)planet[t].inputEnabled=!0,planet[t].events.onInputDown.add(listener,{i:t});selection=game.add.image(0,0,"selection"),selection.width=38,selection.height=38,selection.visible=!1,console.log(selection.width),planet_text=game.add.text(0,0,"",{fill:"#ffffff"})},Planets.prototype.update=function(){theta+=.01;for(var e=520,t=290,a=0;a<planet.length;a++)planet[a].x=this.moveX(planet[a].width,e*demi_axes[a],sens[a]*(theta+1)*demi_axes[5-a]),planet[a].y=this.moveY(planet[a].height,t*demi_axes[a],sens[a]*(theta+1)*demi_axes[5-a]);-1!=planet_selected&&(selection.visible=!0,selection.x=planet[planet_selected].x,selection.y=planet[planet_selected].y,planet_text.x=planet[planet_selected].x,planet_text.y=planet[planet_selected].y-38)},Planets.prototype.render=function(){},Planets.prototype.moveX=function(e,t,a){return game.width/2-e/2+t*Math.cos(a)},Planets.prototype.moveY=function(e,t,a){return(game.height+30)/2-e/2+t*Math.sin(a)};